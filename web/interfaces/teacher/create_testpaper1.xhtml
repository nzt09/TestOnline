<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:c="http://java.sun.com/jsp/jstl/core" xml:lang="en" lang="en">
	<head>
		<title>生成试卷</title>
		<meta http-equiv="keywords" content="enter,your,keywords,here" />
		<meta http-equiv="description"
			content="A short description of this page." />
		<meta http-equiv="content-type" content="text/html; charset=UTF-8" />

		<!--<link rel="stylesheet" type="text/css" href="styles.css">-->
	</head>
	<body>
		<div>
			<h:form>
				<table>
					<tr>
						<td>
							<h:outputLabel>学校</h:outputLabel>
						</td>
						<td>
							<h:selectOneMenu value="#{GenerateAction.schoolId}" onchange="submit()" 
							style="width: 120px " valueChangeListener="#{GenerateAction.changeStateSchool}">
								<c:forEach var="school" items="#{GenerateAction.schools}">
									<f:selectItem itemValue="#{school.id}" itemLabel="#{school.name}"/>
								</c:forEach>					
							</h:selectOneMenu>
						</td>
						<td>
							<h:outputLabel>院系</h:outputLabel>
						</td>
						<td>
							<h:selectOneMenu  value="#{GenerateAction.instituteId}" onchange="submit()" 
							style="width: 120px " valueChangeListener="#{GenerateAction.changeStateIns}">
								<f:selectItem itemValue="0" itemLabel="请选择"/>
								<c:forEach var="institute" items="#{GenerateAction.institutes}">
								<f:selectItem itemValue="#{institute.id}" itemLabel="#{institute.name}"/>
								</c:forEach>		
							</h:selectOneMenu>
						</td>
						<td>
							<h:outputLabel>专业</h:outputLabel>
						</td>
						<td>
						<h:selectOneMenu id="majorId" value="#{GenerateAction.majorId}" onchange="submit()" 
						style="width: 120px " valueChangeListener="#{GenerateAction.changeStateMajor}">
						    <f:selectItem itemValue="0" itemLabel="请选择"/>
							<c:forEach var="major" items="#{GenerateAction.majors}" >
								<f:selectItem itemValue="#{major.id}" itemLabel="#{major.name}"/>
							</c:forEach>
						</h:selectOneMenu>
						</td>
						<td>
							<h:outputLabel>班级</h:outputLabel>
						</td>
						<td>
							<h:selectOneMenu id="classId" value="#{GenerateAction.classId}" style="width: 120px "
							 valueChangeListener="#{GenerateAction.changeStateClass}" onchange="submit()">
								<f:selectItem itemValue="0" itemLabel="请选择"/>
								<c:forEach var="class" items="#{GenerateAction.classes}">
									<f:selectItem itemValue="#{class.id}" itemLabel="#{class.name}"/>
								</c:forEach>
							</h:selectOneMenu>	
						</td>
						<td>
							<h:outputLabel>科目</h:outputLabel>
						</td>
						<td>
							<h:selectOneMenu value="#{GenerateAction.courseId}" style="width: 120px ">
								<f:selectItem itemValue="0" itemLabel="请选择"/>
								<c:forEach var="course" items="#{GenerateAction.courses}">
									<f:selectItem itemValue="#{course.id}" itemLabel="#{course.name}"/>
								</c:forEach>
							</h:selectOneMenu>
						</td>
					</tr>
					<tr>
						<td></td>
						<td><h:commandLink action="#{GenerateAction.doGenerateTestPaper}" style="text-decoration: none">生成</h:commandLink></td>
						<td></td>
						<td></td>
						<td></td>
					</tr>
				</table>
			</h:form>
		</div>
		<div id="testpaper" align="center">
			<c:if test="${GenerateAction.result==1}">
				<h1>试卷已生成</h1>
			</c:if>
			<c:if test="${GenerateAction.result==0}">
				<h1>试卷生成失败</h1>
			</c:if>
		</div>
	</body>
</html>
